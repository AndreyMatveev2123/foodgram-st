{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useTags } from './index.js';\nimport api from '../api';\nexport default function useRecipes() {\n  _s();\n  const [recipes, setRecipes] = useState([]);\n  const [recipesCount, setRecipesCount] = useState(0);\n  const [recipesPage, setRecipesPage] = useState(1);\n  const handleLike = ({\n    id,\n    toLike = true\n  }) => {\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api);\n    method({\n      id\n    }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_favorited = toLike;\n        }\n        return recipe;\n      });\n      setRecipes(recipesUpdated);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  const handleAddToCart = ({\n    id,\n    toAdd = true,\n    callback\n  }) => {\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api);\n    method({\n      id\n    }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_in_shopping_cart = toAdd;\n        }\n        return recipe;\n      });\n      setRecipes(recipesUpdated);\n      callback && callback(toAdd);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  return {\n    recipes,\n    setRecipes,\n    recipesCount,\n    setRecipesCount,\n    recipesPage,\n    setRecipesPage,\n    handleLike,\n    handleAddToCart\n  };\n}\n_s(useRecipes, \"L9rApvCm7osu+Z9J2RsG7HEwZDw=\");","map":{"version":3,"names":["React","useState","useTags","api","useRecipes","_s","recipes","setRecipes","recipesCount","setRecipesCount","recipesPage","setRecipesPage","handleLike","id","toLike","method","addToFavorites","bind","removeFromFavorites","then","res","recipesUpdated","map","recipe","is_favorited","catch","err","errors","alert","handleAddToCart","toAdd","callback","addToOrders","removeFromOrders","is_in_shopping_cart"],"sources":["C:/Users/Asus/Desktop/foodgram-st/frontend/src/utils/use-recipes.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useTags } from './index.js'\r\nimport api from '../api'\r\n\r\nexport default function useRecipes () {\r\n  const [ recipes, setRecipes ] = useState([])\r\n  const [ recipesCount, setRecipesCount ] = useState(0)\r\n  const [ recipesPage, setRecipesPage ] = useState(1)\r\n\r\n  const handleLike = ({ id, toLike = true }) => {\r\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api)\r\n    method({ id }).then(res => {\r\n      const recipesUpdated = recipes.map(recipe => {\r\n        if (recipe.id === id) {\r\n          recipe.is_favorited = toLike\r\n        }\r\n        return recipe\r\n      })\r\n      setRecipes(recipesUpdated)\r\n    })\r\n    .catch(err => {\r\n      const { errors } = err\r\n      if (errors) {\r\n        alert(errors)\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleAddToCart = ({ id, toAdd = true, callback }) => {\r\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api)\r\n    method({ id }).then(res => {\r\n      const recipesUpdated = recipes.map(recipe => {\r\n        if (recipe.id === id) {\r\n          recipe.is_in_shopping_cart = toAdd\r\n        }\r\n        return recipe\r\n      })\r\n      setRecipes(recipesUpdated)\r\n      callback && callback(toAdd)\r\n    })\r\n    .catch(err => {\r\n      const { errors } = err\r\n      if (errors) {\r\n        alert(errors)\r\n      }\r\n    })\r\n  }\r\n\r\n  return {\r\n    recipes,\r\n    setRecipes,\r\n    recipesCount,\r\n    setRecipesCount,\r\n    recipesPage,\r\n    setRecipesPage,\r\n    handleLike,\r\n    handleAddToCart,\r\n  }\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,OAAO,QAAQ,YAAY;AACpC,OAAOC,GAAG,MAAM,QAAQ;AAExB,eAAe,SAASC,UAAUA,CAAA,EAAI;EAAAC,EAAA;EACpC,MAAM,CAAEC,OAAO,EAAEC,UAAU,CAAE,GAAGN,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAEO,YAAY,EAAEC,eAAe,CAAE,GAAGR,QAAQ,CAAC,CAAC,CAAC;EACrD,MAAM,CAAES,WAAW,EAAEC,cAAc,CAAE,GAAGV,QAAQ,CAAC,CAAC,CAAC;EAEnD,MAAMW,UAAU,GAAGA,CAAC;IAAEC,EAAE;IAAEC,MAAM,GAAG;EAAK,CAAC,KAAK;IAC5C,MAAMC,MAAM,GAAGD,MAAM,GAAGX,GAAG,CAACa,cAAc,CAACC,IAAI,CAACd,GAAG,CAAC,GAAGA,GAAG,CAACe,mBAAmB,CAACD,IAAI,CAACd,GAAG,CAAC;IACxFY,MAAM,CAAC;MAAEF;IAAG,CAAC,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;MACzB,MAAMC,cAAc,GAAGf,OAAO,CAACgB,GAAG,CAACC,MAAM,IAAI;QAC3C,IAAIA,MAAM,CAACV,EAAE,KAAKA,EAAE,EAAE;UACpBU,MAAM,CAACC,YAAY,GAAGV,MAAM;QAC9B;QACA,OAAOS,MAAM;MACf,CAAC,CAAC;MACFhB,UAAU,CAACc,cAAc,CAAC;IAC5B,CAAC,CAAC,CACDI,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,eAAe,GAAGA,CAAC;IAAEhB,EAAE;IAAEiB,KAAK,GAAG,IAAI;IAAEC;EAAS,CAAC,KAAK;IAC1D,MAAMhB,MAAM,GAAGe,KAAK,GAAG3B,GAAG,CAAC6B,WAAW,CAACf,IAAI,CAACd,GAAG,CAAC,GAAGA,GAAG,CAAC8B,gBAAgB,CAAChB,IAAI,CAACd,GAAG,CAAC;IACjFY,MAAM,CAAC;MAAEF;IAAG,CAAC,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;MACzB,MAAMC,cAAc,GAAGf,OAAO,CAACgB,GAAG,CAACC,MAAM,IAAI;QAC3C,IAAIA,MAAM,CAACV,EAAE,KAAKA,EAAE,EAAE;UACpBU,MAAM,CAACW,mBAAmB,GAAGJ,KAAK;QACpC;QACA,OAAOP,MAAM;MACf,CAAC,CAAC;MACFhB,UAAU,CAACc,cAAc,CAAC;MAC1BU,QAAQ,IAAIA,QAAQ,CAACD,KAAK,CAAC;IAC7B,CAAC,CAAC,CACDL,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC;EAED,OAAO;IACLrB,OAAO;IACPC,UAAU;IACVC,YAAY;IACZC,eAAe;IACfC,WAAW;IACXC,cAAc;IACdC,UAAU;IACViB;EACF,CAAC;AACH;AAACxB,EAAA,CAtDuBD,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}